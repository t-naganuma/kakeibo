# (ファイル名: 要件定義.md)

# 家計簿アプリ 要件定義書

**バージョン:** 1.0
**作成日:** 2025年4月19日

## 1. 概要

### 1.1. アプリ名
Kakeibo

### 1.2. 目的
家族内で「誰が」「いつ」「何に」「いくら」使ったかを簡単に記録・共有し、カテゴリごとの予算管理を行う。シンプルで簡単な入力操作、固定費の自動化、入力の簡略化を実現する。

### 1.3. ターゲットユーザー
特定の家族（開発者とその家族）。クローズドな環境での利用を想定。

## 2. 機能要件

### 2.1. 支出記録
- **入力項目:**
    - 金額（必須）
    - カテゴリ（必須、支出カテゴリから選択）
    - 日付（必須、デフォルトは入力日）
    - 使用者（任意、登録済みの家族メンバー名または「共通」から選択）
    - メモ（任意）
- **入力補助:** 金額入力フィールドに電卓機能を表示する。

### 2.2. 収入記録
- **入力項目:**
    - 金額（必須）
    - カテゴリ（必須、収入カテゴリから選択）
    - 日付（必須、デフォルトは入力日）
    - 使用者（任意、登録済みの家族メンバー名から選択）
    - メモ（任意）

### 2.3. 固定費自動入力
- **設定項目:**
    - 金額
    - カテゴリ（支出カテゴリから選択）
    - 引き落とし日（例: 毎月〇日）
    - 使用者（登録済みの家族メンバー名または「共通」から選択）
    - メモ（任意）
- **機能:** 設定した引き落とし日になると、自動的に支出データとして記録される。
- **管理:** 設定された固定費の一覧表示、編集、削除機能を提供する。

### 2.4. 予算管理
- **設定単位:** 月単位
- **設定対象:** 支出カテゴリごと
- **設定方法:**
    - ユーザーがカテゴリごとに月間の予算額を設定できる。
    - 一度設定した予算額は、ユーザーが変更するまで翌月以降も継続して適用される。
- **表示:** 月ごとに、カテゴリ別の予算額、その月の実績支出額、達成状況（残額や過不足など）を表示する。

### 2.5. データ集計・可視化
- **2.5.1. デフォルト表示（ホーム画面）:**
    - 上部に月間カレンダーを表示する。カレンダーの日付ごとにその日の収支合計額を表示する。
    - 下部に、カレンダーで選択された日付（デフォルトは当日）の収入・支出の詳細リストを表示する。
- **2.5.2. 支出者別比較:**
    - 月ごとに、登録メンバー別（例: 夫、妻）および「共通」の支出合計額を棒グラフなどで隣接して表示し、比較できるようにする。
- **2.5.3. 収支バランス表示:**
    - 指定した期間（月単位など）の収入合計と支出合計（および支出カテゴリ別内訳）を円グラフなどで視覚的に表示する。
- **2.5.4. 期間別集計:**
    - 日別、週別、月別、年別、カスタム期間などで収入・支出の合計額を集計・表示する機能。
- **2.5.5. カテゴリ別集計:**
    - 指定した期間の支出（および収入）について、カテゴリ別の合計額や割合をグラフ等で表示する機能。

### 2.6. ユーザー管理・認証
- **認証方式:** メールアドレスとパスワードによる認証。
- **ユーザー登録:** 招待制を採用する。
    - 最初のユーザー（管理者）が他の家族メンバーを招待する（招待方法はメール等を想定）。
    - 招待されたメンバーはアカウントを作成して家計簿グループに参加する。
- **管理機能:** 管理者はメンバーの招待、削除を行える。
- **ログイン/ログアウト:** 機能を提供する。

### 2.7. 家計簿共有
- 同じ家計簿グループに属するメンバー全員が、単一の家計簿データを閲覧および編集できる。
- データはリアルタイムで同期されることを目指す（Supabase Realtime機能の活用を想定）。

### 2.8. カテゴリ管理
- **収入カテゴリ**と**支出カテゴリ**をそれぞれ別々に管理する。
- ユーザーは各カテゴリを自由に追加、編集、削除できる。
- アプリ初期状態として、一般的な収入・支出カテゴリをいくつかプリセットで用意する。

### 2.9. 支出入力簡略化（コピー機能）
- 記録済みの支出履歴リストやカレンダー下のリストから、特定の支出項目を選択して詳細を表示できる。
- 詳細表示画面に「この内容をコピーして新規作成」ボタンを設ける。
- コピーボタンを押すと、金額と日付以外の項目（カテゴリ、使用者、メモ等）が入力された状態で新規支出入力画面が開き、ユーザーは金額や日付等を修正して簡単に登録できる。

## 3. 非機能要件

### 3.1. UI/UX (ユーザーインターフェース/ユーザーエクスペリエンス)
- 全体的にシンプルで直感的、かつ簡単に操作できるデザインを目指す。
- 入力の手間を最小限に抑える。
- 金額入力時の電卓機能を提供する。

### 3.2. プラットフォーム
- 主要ターゲットデバイス: iPad (Webブラウザ経由での利用)
- PWA (Progressive Web App) 化を推奨し、他のデバイス（スマートフォン、PC）でもネイティブアプリに近い使用感でアクセスできるようにする。

### 3.3. データ管理・技術スタック
- **バックエンド:** Supabase (BaaS) を利用する。
    - **データベース:** Supabase DB (PostgreSQL)
    - **認証:** Supabase Auth
    - **リアルタイム同期:** Supabase Realtime Subscriptions
    - その他、必要に応じてSupabase Storage（アイコン画像等あれば）を利用。
- **フロントエンド:** (Web技術: HTML, CSS, JavaScript フレームワークは別途選定)

### 3.4. セキュリティ
- Supabase Authを利用した安全な認証（メール/パスワード）を実装する。
- データアクセスは認証された同一グループのメンバーに限定する。

### 3.5. その他（スコープ外）
以下の機能は現時点では実装しない。
- 残高表示、総資産管理機能
- レシート読み取り機能
- 銀行口座やクレジットカード連携機能

## 4. 今後のステップ
1.  **画面設計（ワイヤーフレーム作成）** ← 次のステップ
2.  詳細設計（データモデル設計、API設計等）
3.  開発（フロントエンド、バックエンド）
4.  テスト
5.  リリース（家族内）
